
	<div class="container" style="margin-top: 8vh;">
		<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
			<a href="/" class="stext-109 cl8 hov-cl1 trans-04">
				Home
				<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
			</a>

			<a href="wishlist" class="stext-109 cl8 hov-cl1 trans-04">
				Wishlist
			</a>
		</div>
	</div>



<div class="container py-5 mt-0">

  <!-- For demo purpose -->
  <!-- End -->

  <div class="row">
    <div class="col-lg-8 mx-auto">

      <!-- List group-->
      {{#each wishlists}}
      <ul class="list-group shadow">

        <!-- list group item-->
        
        <li class="list-group-item">
          <!-- Custom content-->
          {{#each products}}
          <div class="media align-items-lg-center flex-column flex-lg-row p-3">
            <div class="media-body order-2 order-lg-1">
              <h5 class="mt-0 font-weight-bold mb-2">{{this.name}}</h5>
              <p class="font-italic text-muted mb-0 small">{{this.variant}}</p>
              <div class="d-flex align-items-center justify-content-start mt-1">
                <h6 class="font-weight-bold my-2" style="text-decoration: line-through;">{{this.mrp}}</h6>
                <h6 class="font-weight-bold my-2">{{this.price}}</h6>
              </div>
                            <div class="d-flex align-items-center justify-content-end mt-1">
               <a href="productdetail?id={{this._id}}" class="btn flex-c-m  cl2  ">
								View Product
				<a href="#" class="btn flex-c-m cl2 remove-from-wishlist" data-product-id="{{this._id}}">
          Remove From Wishlist
        </a>
              </div>
            </div><img src="{{this.image}}" alt="Generic placeholder image" width="200" class="ml-lg-5 order-1 order-lg-2">
          </div>
          <hr>
          {{/each}}
          <!-- End -->
          {{/each}}
        </li>
      
        
        <!-- End -->

        
      </ul>
    </div>
  </div>
</div>


<script>
   document.addEventListener('DOMContentLoaded', () => {
    const removeFromWishlistButtons = document.querySelectorAll('.remove-from-wishlist');
    removeFromWishlistButtons.forEach(button => {
      button.addEventListener('click', async (event) => {
        event.preventDefault();
        const productId = button.dataset.productId;
        try {
          const response = await fetch(`/wishlist/${productId}`, {
            method: 'DELETE'
          });
          const data = await response.json();
          Swal.fire({
          text: data.message,
          icon: "success"
        });
          // Optionally, you can remove the product from the UI immediately upon successful removal
          setTimeout(function(){ window.location.reload() },  3000);
        } catch (error) {
          console.error('Error:', error);
          alert('An error occurred while removing the product from the wishlist.');
        }
      });
    });
  });
</script>